<!-- LOADING -->
<div *ngIf="cargando" class="loading-container">
  <div class="loading-spinner">
    <i class="fas fa-spinner fa-spin"></i>
  </div>
  <p class="loading-text">Cargando portafolio...</p>
</div>

<!-- CONTENT -->
<div *ngIf="!cargando" class="portfolio-container">

  <header class="portfolio-header" *ngIf="programador as pr">
    <div class="portfolio-header-main horizontal-layout">

      <div class="programmer-photo" *ngIf="pr.foto">
        <img [src]="pr.foto" [alt]="'Foto de ' + pr.nombre" />
      </div>

      <div class="programmer-info">
        <div class="programmer-badge">
          <i class="fas fa-code"></i>
          <span>Desarrollador</span>
        </div>

        <h1 class="programmer-name">{{ pr.nombre }}</h1>

        <p class="programmer-specialty" *ngIf="pr.especialidad">
          <i class="fas fa-laptop-code"></i>
          {{ pr.especialidad }}
        </p>

        <p class="programmer-description" *ngIf="pr.descripcion">
          {{ pr.descripcion }}
        </p>

        <!-- ✅ CORRECTO -->
        <div class="availability-status" *ngIf="pr.disponibilidad">
          <i class="fas fa-circle"></i>
          <span><strong>Disponibilidad:</strong> {{ pr.disponibilidad }}</span>
        </div>

        <div class="actions">
          <a [routerLink]="['/asesoria', pr.id]" class="btn-agendar">
            <i class="fas fa-calendar-check"></i>
            Agendar asesoría
          </a>
        </div>
      </div>

    </div>
  </header>

  <!-- Proyectos -->
  <main class="projects-container">
    <section class="project-section">

      <div class="section-header">
        <div class="icon-wrapper">
          <i class="fas fa-folder-open"></i>
        </div>
        <h2>Proyectos</h2>
        <span class="project-count">{{ proyectos.length }} proyectos</span>
      </div>

      <div *ngIf="proyectos.length === 0" class="empty-state">
        <i class="fas fa-circle-info"></i>
        <p>Este programador aún no tiene proyectos registrados.</p>
      </div>

      <div class="projects-grid">
        <div *ngFor="let p of proyectos; trackBy: trackByProyecto" class="project-card">

          <div class="project-header">
            <h3>
              <i class="fas fa-project-diagram"></i>
              {{ p.titulo }}
            </h3>
          </div>

          <p class="project-description">{{ p.descripcion }}</p>

          <div class="project-details">
            <div class="detail-item">
              <i class="fas fa-code"></i>
              <div>
                <strong>Tecnologías:</strong>
                <div class="tech-tags">
                  <span *ngFor="let tech of techs(p)" class="tech-tag">{{ tech }}</span>
                </div>
              </div>
            </div>
          </div>

          <div class="project-links" *ngIf="p.urlRepo || p.urlDemo">
            <a *ngIf="p.urlRepo" [href]="p.urlRepo" target="_blank" rel="noopener" class="project-link repo-link">
              <i class="fab fa-github"></i> Ver código
            </a>
            <a *ngIf="p.urlDemo" [href]="p.urlDemo" target="_blank" rel="noopener" class="project-link demo-link">
              <i class="fas fa-external-link-alt"></i> Ver demo
            </a>
          </div>

        </div>
      </div>

    </section>
  </main>
</div>
