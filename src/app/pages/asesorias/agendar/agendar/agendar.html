<h2>Agendar asesoría con {{ programador?.nombre }}</h2>

<div *ngIf="programador" class="programador-header">
    <img *ngIf="programador.foto" [src]="programador.foto" width="70" alt="Foto perfil" />
    <div>
        <h3>{{ programador.nombre }}</h3>
        <p>{{ programador.especialidad }}</p>
    </div>
</div>

<form [formGroup]="form" (ngSubmit)="enviarSolicitud()">

    <label>Tu nombre</label>
    <input type="text" formControlName="nombreSolicitante" />

    <label>Tu correo</label>
    <input type="email" formControlName="emailSolicitante" />

    <label>Fecha</label>
    <input type="date" formControlName="fecha" />

    <div>
        <label>Hora</label>

        <ng-container *ngIf="horasDisponibles.length > 0; else campoLibre">
            <select formControlName="hora">
                <option value="">Seleccione una hora</option>
                <option *ngFor="let h of horasDisponibles" [value]="h">
                    {{ h }}
                </option>
            </select>
            <p class="ayuda">
                Horarios disponibles configurados por el administrador.
            </p>
        </ng-container>

        <ng-template #campoLibre>
            <input type="time" formControlName="hora">
            <p class="ayuda">
                Este programador no tiene horarios configurados; puedes elegir cualquier hora.
            </p>
        </ng-template>
    </div>

    <label>Comentario (motivo de la asesoría)</label>
    <textarea formControlName="comentario"></textarea>

    <button type="submit" [disabled]="cargando || form.invalid">
        {{ cargando ? 'Enviando...' : 'Enviar solicitud' }}
    </button>
</form>